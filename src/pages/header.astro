---
import { getLanguage, getTranslations, translations } from '../utils/i18n';

const lang = getLanguage();
const t = getTranslations(lang);
---
 
<header class="text-center my-8">
  <h1
    class="text-5xl font-extrabold tracking-tighter bg-linear-to-r from-red-500 to-orange-500 bg-clip-text text-transparent"
  >
    IMPOSTOR
  </h1>
  <p id="header-subtitle" class="text-slate-400 mt-2 italic">{t.header.subtitle}</p>
</header>

<script define:vars={{ translations }}>
  function getLanguage() {
    const stored = localStorage.getItem('language');
    if (stored === 'es' || stored === 'en') return stored;
    const browserLang = navigator.language || navigator.userLanguage;
    return browserLang.startsWith('es') ? 'es' : 'en';
  }

  function updateFooterContent() {
    const lang = getLanguage();
    const t = translations[lang];
    const subtitle = document.getElementById('header-subtitle');
    
    if (subtitle) subtitle.textContent = t.header.subtitle;
  }

  window.addEventListener('languageChanged', updateFooterContent);
</script>

<style>
  h1 {
    animation: pulse 2s infinite;
  }
</style>
