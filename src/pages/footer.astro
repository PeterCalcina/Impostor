---
import { getLanguage, getTranslations } from '../utils/i18n';

const lang = getLanguage();
const t = getTranslations(lang);
---
 
<footer class="mt-auto py-8 text-center text-slate-500 text-xs">
  <p id="footer-made-with">{t.footer.madeWith}</p>
  <p id="footer-feedback" class="mt-1">{t.footer.feedback}</p>
</footer>

<script>
  const translations = {
    es: {
      footer: {
        madeWith: "Hecho con ❤️ para Magios Deck Society",
        feedback: "¿Tienes ideas? ¡Envíame tu feedback! :D",
      },
    },
    en: {
      footer: {
        madeWith: "Made with ❤️ for Magios Deck Society",
        feedback: "Got ideas? Send me your feedback! :D",
      },
    },
  };

  function getLanguage() {
    const stored = localStorage.getItem('language');
    if (stored === 'es' || stored === 'en') return stored;
    const browserLang = navigator.language || (navigator as any).userLanguage;
    return browserLang.startsWith('es') ? 'es' : 'en';
  }

  function updateFooterContent() {
    const lang = getLanguage();
    const t = translations[lang as 'es' | 'en'];
    const madeWith = document.getElementById('footer-made-with');
    const feedback = document.getElementById('footer-feedback');
    
    if (madeWith) madeWith.textContent = t.footer.madeWith;
    if (feedback) feedback.textContent = t.footer.feedback;
  }

  window.addEventListener('languageChanged', updateFooterContent);
</script>
