---
import { getLanguage, getTranslations, translations } from '../utils/i18n';

const lang = getLanguage();
const t = getTranslations(lang);
---
 
<footer class="mt-auto py-8 text-center text-slate-500 text-xs">
  <p id="footer-made-with">{t.footer.madeWith}</p>
  <p id="footer-feedback" class="mt-1">{t.footer.feedback}</p>
</footer>

<script define:vars={{ translations }}>
  function getLanguage() {
    const stored = localStorage.getItem('language');
    if (stored === 'es' || stored === 'en') return stored;
    const browserLang = navigator.language || navigator.userLanguage;
    return browserLang.startsWith('es') ? 'es' : 'en';
  }

  function updateFooterContent() {
    const lang = getLanguage();
    const t = translations[lang];
    const madeWith = document.getElementById('footer-made-with');
    const feedback = document.getElementById('footer-feedback');
    
    if (madeWith) madeWith.textContent = t.footer.madeWith;
    if (feedback) feedback.textContent = t.footer.feedback;
  }

  window.addEventListener('languageChanged', updateFooterContent);
</script>
